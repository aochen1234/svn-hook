{% extends "base.html" %}
{% block title %}Domain Test Display{% endblock %}
{% block welcome %}{{ user }}{% endblock %}
{% block name %}{{ user }}{% endblock %}
{% load mytags %}
{% load iptags %}
{% block menu %}
    <ul class="sidebar-nav">
					<li class="sidebar-nav-link">
						<a href="{% url "index" %}">
							<i class="am-icon-home sidebar-nav-link-logo"></i> 首页
						</a>
					</li>
					<li class="sidebar-nav-link">
						<a href="{% url 'result_dis' %}" class="active">
							<i class="am-icon-clone sidebar-nav-link-logo"></i> 检测结果查看
							<span class="am-badge am-badge-secondary sidebar-nav-link-logo-ico am-round am-fr am-margin-right-sm"></span>
						</a>
					</li>
					<li class="sidebar-nav-link">
						<a href="{% url "source_set" %}">
							<i class="am-icon-table sidebar-nav-link-logo"></i> 检测来源设置
						</a>
					</li>
					<li class="sidebar-nav-link">
						<a href="{% url "testrule" %}">
							<i class="am-icon-calendar sidebar-nav-link-logo"></i> 检测规则设置
						</a>
					</li>
					<li class="sidebar-nav-link">
						<a href="{% url "speed" %}" >
							<i class="am-icon-calendar sidebar-nav-link-logo"></i> 检测批数设置
						</a>
					</li>
                    <li class="sidebar-nav-link">
						<a href="{% url "resexport" %}" >
							<i class="am-icon-calendar sidebar-nav-link-logo"></i> 检测结果导出
						</a>
					</li>
                    <li class="sidebar-nav-heading"></li>
                    <li class="sidebar-nav-link">
                    </li>
			</div>
        </ul>
{% endblock %}
            {% block content %}
			<!-- 内容区域 -->

			<div class="tpl-content-wrapper">

				<div class="container-fluid am-cf">
					<div class="row">
						<div class="am-u-sm-12 am-u-md-12 am-u-lg-9">
                            <div class="page-header-heading"><span class="am-icon-home page-header-heading-icon"></span> 检测{{ status }}结果查看 <small>共<strong style="color: yellowgreen;font-size: larger">{{ result }}</strong>条数据</small></div>
							<p class="page-header-description">目前只支持HTTP检测。</p>
						</div>
				</div>


                 <div class="row  am-cf">
                    <div class="am-u-sm-12 am-u-md-12 am-u-lg-12 widget-margin-bottom-lg">
							<div class="widget am-cf widget-body-lg" style="margin-top: 50px">

								<div class="widget-body  am-fr">
									<div class="am-scrollable-horizontal ">
										<table width="100%" class="am-table am-table-compact am-text-nowrap tpl-table-black ">
											<thead>
												<tr>
													<th style="font-size: 16px">记录时间</th>
													<th style="font-size: 16px">来源IP</th>
                                                    <th style="font-size: 16px">URL数量</th>
                                                    <th style="font-size: 16px">COOKIE数量</th>
												</tr>
											</thead>
											<tbody id="tablebody">
                                            {% for ss in users.object_list %}
                                                <tr class="gradeX" style="width:200px; height:80px;">
                                                    <td>{{ ss.pattition_time }}</td>
                                                    {% if ss.sloc != '' and ss.sloc != None %}
                                                    <td id="image">{{ ss.sip | truncate_ip }}
                                                        <div style="width: 50px;display: inline-block;">
                                                            <img class="imgage" style="width: 100%" src="data:image/jpeg;base64, {{ ss.sloc | changepage }}">
                                                        </div>
                                                    </td>
                                                    {% elif ss.sloc == '' or ss.sloc == None and ss.sip != '' and ss.sip != None%}
                                                <td id="image">{{ ss.sip | truncate_ip }}
                                                        <div style="width: 30px;display: inline-block;">
                                                            <img class="imgage" style="width: 100%" src="data:image/jpeg;base64, {{ ss.sip | truncate_ip | ip2loc | changepage }}">
                                                        </div>
                                                </td>
                                                {% else %}
                                                    <td>None</td>
                                                {% endif %}
                                                    <td><a href="{% url "ipurlcheck" red ss.id %}" style="color: white;text-decoration: underline">{{ ss.id  }}</a></td>
                                                        <td>{{ ss.id  }}</td>
												</tr>
                                            {% endfor %}
												<!-- more data -->
											</tbody>
										</table>
                                    <nav aria-label="Page navigation" style="margin-left: 300px">
                                        <div>
                                        <ul class="pagination">
                                                {% if users.has_previous %}
                                                    <li>
                                                    <a class="type-vale" href="?page=1&type={{ type }}&sort={{ sort }}&catas={{ cata }}" aria-label="Previous"><span aria-hidden="true">首页</span></a>
                                                    </li>
                                                    <li>
                                                    <a class="type-vale" href="?page={{ users.previous_page_number }}&type={{ type }}&sort={{ sort }}&catas={{ cata }}" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
                                                    </li>
                                                {% endif %}

                                               {% for pg in users.paginator.pager_num_range %}
                                                {% if pg == users.number %}
                                                <li class="active"><a class="type-vale" href="?page={{ pg }}&type={{ type }}&sort={{ sort }}&catas={{ cata }}">{{ pg }}</a></li>
                                                {% else %}
                                                <li><a class="type-vale" href="?page={{ pg }}&type={{ type }}&sort={{ sort }}&catas={{ cata }}">{{ pg }}</a></li>
                                                {% endif %}
                                                {% endfor %}
                                                {% if users.has_next %}
                                                    <li>
                                                        <a class="type-vale" href="?page={{ users.next_page_number }}&type={{ type }}&sort={{ sort }}&catas={{ cata }}" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>
                                                    <li>
                                                        <a class="type-vale" href="?page={{ users.paginator.num_pages }}&type={{ type }}&sort={{ sort }}&catas={{ cata }}" aria-label="Next"><span aria-hidden="true">尾页</span></a></li>
                                                {% endif %}
                                            </ul>
                                         </div>
                                            </nav>
                                    </div>
								</div>
							</div>

						</div>
					</div>
        {% endblock %}
{% block js %}
    $(document).ready(function()
    {
        var edn = '';
        $('.gradeX #image').each(function () {
            $(this).mouseover(function(){
            edn = $(this).html();
            edn = edn.replace('<p id="tip" style="margin-left: 60px;display: none;">', '<p id="tip" style="margin-left: 60px;">');
            $(this).html(edn);
    })
    })
    var edn = '';
        $('.gradeX #image').each(function () {
            $(this).mouseout(function(){
            edn = $(this).html();
            console.log(edn);
            edn = edn.replace('<p id="tip" style="margin-left: 60px;">', '<p id="tip" style="margin-left: 60px;display: none;">');
            $(this).html(edn);
    })
    })
    })
{% endblock %}